{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block main %}
    <h1 class="display-2">Registration</h1>
    <br>
    <form id="myform" onsubmit="check_name(this, document.querySelector('#username_entry').value)" action="/register" method="post">
        <div class="form-group">
            <input id="username_entry" type="text" name="username" placeholder="Username" autocomplete="off" autofocus class="form-control">
        </div>
        <div class="form-group">
            <input type="password" name="password" placeholder="Password" autocomplete="off" autofocus class="form-control">
        </div>
        <div class="form-group">
            <input type="password" name="confirmation" placeholder="Password" autocomplete="off" autofocus class="form-control">
        </div>
        <button class="btn btn-primary" type="submit">Register</button>
    </form>
    <script>
        function check_name(event, name) {
            $.get("/check?username=" + name, function(data) {
                if (data == false) {
                    alert("Username unavailable");
                    event.preventDefault();
                }
            }, "json" );
        }
    </script>
{% endblock %}